#!/bin/bash
  
  readonly progName=$(/usr/bin/basename ${0})
  readonly progVersion="1.1"
  
  tmpFolder=$(getconf DARWIN_USER_CACHE_DIR)
  randString=$(/usr/bin/openssl rand -hex 5)
  workDir="${tmpFolder}${randString}" && /bin/mkdir -p "${workDir}"
  
  readonly cscArg="${1}"
  
  if [ -z "${1}" ]; then
    echo "Error: Invalid argument" && exit 1
  fi
  
  cd "${workDir}" && /usr/bin/curl \
    --show-error \
    --fail \
    --location \
    --remote-time \
    --silent \
    --remote-name \
    --remote-header-name \
    "${cscArg}"
  
  getFilename=$(/usr/bin/find "${workDir}" -name "*.*")
  
  fileBasename=$(/usr/bin/basename "${getFilename}") && fileBasename=$(/usr/bin/basename ${fileBasename%.*})
  fileExtension="${getFilename##*.}"
  filePath="${getFilename%.*}"
  
  SHASumComputed=$(/usr/bin/shasum -a 256 -p "${getFilename}" | cut -d' ' -f1)
  
  echo "Filename:          '${fileBasename}.${fileExtension}'"
  echo "SHA-256 Checksum:  '${SHASumComputed}'"
  
  rm -rf "${workDir}"