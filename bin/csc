#!/bin/bash
  
  readonly progName=$(/usr/bin/basename ${0})
  readonly progVersion="1.1"
  
  readonly boldEcho=$(/usr/bin/tput bold)
  readonly normalEcho=$(/usr/bin/tput sgr0)
  readonly redEcho=$(/usr/bin/tput setaf 1)
  readonly greenEcho=$(/usr/bin/tput setaf 2)
  readonly blueEcho=$(/usr/bin/tput setaf 4)
  readonly yellowEcho=$(/usr/bin/tput setaf 3)
  
  tmpFolder=$(getconf DARWIN_USER_CACHE_DIR)
  randString=$(/usr/bin/openssl rand -hex 5)
  workDir="${tmpFolder}${randString}" && /bin/mkdir -p "${workDir}"
  
  readonly cscArg="${1}"
  
  if [ -z "${1}" ]; then
    echo "Error: Invalid argument" && exit 1
  fi
  
  cd "${workDir}" && /usr/bin/curl \
    --show-error \
    --fail \
    --location \
    --remote-time \
    --silent \
    --remote-name \
    --remote-header-name \
    "${cscArg}"
  
  getFilename=$(/usr/bin/find "${workDir}" -name "*.*")
  
  fileBasename=$(/usr/bin/basename "${getFilename}") && fileBasename=$(/usr/bin/basename ${fileBasename%.*})
  fileExtension="${getFilename##*.}"
  filePath="${getFilename%.*}"
  
  SHASumComputed=$(/usr/bin/shasum -a 256 -p "${getFilename}" | cut -d' ' -f1)
  
  echo "${boldEcho}Filename${normalEcho}          '${boldEcho}${blueEcho}${fileBasename}${normalEcho}.${boldEcho}${yellowEcho}${fileExtension}${normalEcho}'"
  echo "${boldEcho}SHA-256 Checksum${normalEcho}  '${boldEcho}${greenEcho}${SHASumComputed}${normalEcho}'"
  
  rm -rf "${workDir}"